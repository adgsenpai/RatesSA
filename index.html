<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>South Africa Electricity Tariffs 2024</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="South Africa Electricity Tariffs 2024 - Calculate your electricity costs based on province and consumption.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rates.adgstudios.co.za">
    <meta property="og:title" content="South Africa Electricity Tariffs 2024">
    <meta property="og:description" content="Calculate your electricity costs based on province and consumption.">
    <meta property="og:image" content="https://rates.adgstudios.co.za/seo.webp">

    <!-- view point -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- favicon -->
    <link rel="icon" href="https://rates.adgstudios.co.za/seo.webp" type="image/x-icon">

    <!-- keywords -->
    <meta name="keywords"
        content="electricity, tariffs, south africa, 2024, rates, cost, consumption, province, calculator">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://rates.adgstudios.co.za/electricity-tariffs-2024">
    <meta property="twitter:title" content="South Africa Electricity Tariffs 2024">
    <meta property="twitter:description" content="Calculate your electricity costs based on province and consumption.">
    <meta property="twitter:image" content="https://rates.adgstudios.co.za/seo.webp">

    <style>
        *,
        ::before,
        ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        /* ! tailwindcss v3.4.15 | MIT License | https://tailwindcss.com */
        *,
        ::after,
        ::before {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb
        }

        ::after,
        ::before {
            --tw-content: ''
        }

        :host,
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent
        }

        body {
            margin: 0;
            line-height: inherit
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            letter-spacing: inherit;
            color: inherit;
            margin: 0;
            padding: 0
        }

        button,
        select {
            text-transform: none
        }

        button,
        input:where([type=button]),
        input:where([type=reset]),
        input:where([type=submit]) {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none
        }

        :-moz-focusring {
            outline: auto
        }

        :-moz-ui-invalid {
            box-shadow: none
        }

        progress {
            vertical-align: baseline
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        summary {
            display: list-item
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0
        }

        fieldset {
            margin: 0;
            padding: 0
        }

        legend {
            padding: 0
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        dialog {
            padding: 0
        }

        textarea {
            resize: vertical
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af
        }

        [role=button],
        button {
            cursor: pointer
        }

        :disabled {
            cursor: default
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle
        }

        img,
        video {
            max-width: 100%;
            height: auto
        }

        [hidden]:where(:not([hidden=until-found])) {
            display: none
        }

        .container {
            width: 100%
        }

        @media (min-width: 640px) {
            .container {
                max-width: 640px
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 768px
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1024px
            }
        }

        @media (min-width: 1280px) {
            .container {
                max-width: 1280px
            }
        }

        @media (min-width: 1536px) {
            .container {
                max-width: 1536px
            }
        }

        .mx-auto {
            margin-left: auto;
            margin-right: auto
        }

        .mb-4 {
            margin-bottom: 1rem
        }

        .mb-6 {
            margin-bottom: 1.5rem
        }

        .mb-8 {
            margin-bottom: 2rem
        }

        .mt-1 {
            margin-top: 0.25rem
        }

        .mt-4 {
            margin-top: 1rem
        }

        .mt-6 {
            margin-top: 1.5rem
        }

        .mt-8 {
            margin-top: 2rem
        }

        .mb-2 {
            margin-bottom: 0.5rem
        }

        .block {
            display: block
        }

        .grid {
            display: grid
        }

        .hidden {
            display: none
        }

        .w-full {
            width: 100%
        }

        .min-w-full {
            min-width: 100%
        }

        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr))
        }

        .gap-4 {
            gap: 1rem
        }

        .rounded-lg {
            border-radius: 0.5rem
        }

        .rounded-md {
            border-radius: 0.375rem
        }

        .border-b {
            border-bottom-width: 1px
        }

        .border-t {
            border-top-width: 1px
        }

        .border-gray-300 {
            --tw-border-opacity: 1;
            border-color: rgb(209 213 219 / var(--tw-border-opacity, 1))
        }

        .bg-gray-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1))
        }

        .bg-blue-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1))
        }

        .bg-gray-200 {
            --tw-bg-opacity: 1;
            background-color: rgb(229 231 235 / var(--tw-bg-opacity, 1))
        }

        .bg-white {
            --tw-bg-opacity: 1;
            background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1))
        }

        .p-2 {
            padding: 0.5rem
        }

        .p-4 {
            padding: 1rem
        }

        .p-6 {
            padding: 1.5rem
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem
        }

        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem
        }

        .py-4 {
            padding-top: 1rem;
            padding-bottom: 1rem
        }

        .text-center {
            text-align: center
        }

        .text-right {
            text-align: right
        }

        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem
        }

        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem
        }

        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem
        }

        .font-bold {
            font-weight: 700
        }

        .font-semibold {
            font-weight: 600
        }

        .text-blue-600 {
            --tw-text-opacity: 1;
            color: rgb(37 99 235 / var(--tw-text-opacity, 1))
        }

        .text-gray-700 {
            --tw-text-opacity: 1;
            color: rgb(55 65 81 / var(--tw-text-opacity, 1))
        }

        .text-red-500 {
            --tw-text-opacity: 1;
            color: rgb(239 68 68 / var(--tw-text-opacity, 1))
        }

        .text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        .text-gray-600 {
            --tw-text-opacity: 1;
            color: rgb(75 85 99 / var(--tw-text-opacity, 1))
        }

        .underline {
            -webkit-text-decoration-line: underline;
            text-decoration-line: underline
        }

        .shadow-md {
            --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-sm {
            --tw-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        @media (min-width: 768px) {
            .md\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr))
            }
        }
    </style>
</head>

<body class="bg-gray-100">

    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-6 text-center">South Africa Electricity Tariffs 2024</h1>

        <!-- Calculator Form -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-semibold mb-4">Electricity Cost Calculator</h2>
            <form id="calculator-form">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Province Selection -->
                    <div>
                        <label class="block text-gray-700">Select Province:</label>
                        <select id="province-select"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm text-lg p-2">
                            <option value="">-- Select Province --</option>
                            <option value="Gauteng">Gauteng</option>
                            <option value="Western Cape">Western Cape</option>
                            <option value="KwaZulu-Natal">KwaZulu-Natal</option>
                            <option value="Eastern Cape">Eastern Cape</option>
                            <option value="Free State">Free State</option>
                            <option value="Limpopo">Limpopo</option>
                            <option value="Mpumalanga">Mpumalanga</option>
                            <option value="North West">North West</option>
                            <option value="Northern Cape">Northern Cape</option>
                        </select>
                    </div>
                    <!-- Consumption Input -->
                    <div>
                        <label class="block text-gray-700">Monthly Consumption (kWh):</label>
                        <input type="number" id="consumption-input"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm text-lg p-2" min="0"
                            step="0.01" required="">
                    </div>
                </div>
                <!-- Calculation Mode -->
                <div class="mt-4">
                    <label class="block text-gray-700">Calculation Mode:</label>
                    <select id="mode-select" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm text-lg p-2">
                        <option value="full">Full Month Consumption</option>
                        <option value="partial">Partial Consumption (Starting from certain kWh)</option>
                    </select>
                </div>
                <!-- Starting Consumption Input -->
                <div id="starting-consumption-div" class="mt-4 hidden">
                    <label class="block text-gray-700">Starting Consumption (kWh):</label>
                    <input type="number" id="starting-consumption-input"
                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm text-lg p-2" min="0" step="0.01">
                </div>
                <!-- Customer Type Selection -->
                <div id="customer-type-div" class="mt-4 hidden">
                    <label class="block text-gray-700">Customer Type:</label>
                    <select id="customer-type-select"
                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm text-lg p-2">
                        <!-- Options will be populated dynamically -->
                    </select>
                </div>
                <!-- Submit Button -->
                <div class="mt-6">
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md text-lg">Calculate</button>
                </div>
            </form>
            <!-- Result Table -->
            <div id="result-div" class="mt-6 hidden">
                <h3 class="text-xl font-semibold mb-4">Cost Breakdown</h3>
                <table class="min-w-full bg-white">
                    <thead>
                        <tr>
                            <th class="py-2 px-4 border-b">Tier</th>
                            <th class="py-2 px-4 border-b">kWh Used</th>
                            <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            <th class="py-2 px-4 border-b">Cost (R)</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                        <!-- Rows will be added dynamically -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3" class="py-2 px-4 text-right font-semibold border-t">Fixed Charges</td>
                            <td class="py-2 px-4 border-t" id="fixed-charges-cell">R0.00</td>
                        </tr>
                        <tr>
                            <td colspan="3" class="py-2 px-4 text-right font-semibold">Total Cost</td>
                            <td class="py-2 px-4 font-semibold" id="total-cost-cell">R0.00</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>


        <!-- Tariff Tables -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-semibold mb-4">Electricity Tariff Rates by Province</h2>
            <div id="tariff-tables">
                <!-- Tables will be added dynamically -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Gauteng - City Power</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Prepaid Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.01</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 500 kWh</td>
                                <td class="py-2 px-4 border-b">R2.40</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">501 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R2.73</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Conventional Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 500 kWh</td>
                                <td class="py-2 px-4 border-b">R2.01</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">501 - 1000 kWh</td>
                                <td class="py-2 px-4 border-b">R2.40</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">1001 - 2000 kWh</td>
                                <td class="py-2 px-4 border-b">R2.73</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">2001 - 3000 kWh</td>
                                <td class="py-2 px-4 border-b">R2.76</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">3001 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R2.76</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" class="py-2 px-4 text-right font-semibold">Fixed Monthly Charge: R949.19
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Western Cape - City of Cape Town</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Lifeline Customers</h4>
                    <p class="text-gray-600 mb-2">Eligibility: Properties valued below R400,000</p>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R1.80</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 450 kWh</td>
                                <td class="py-2 px-4 border-b">R3.63</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Domestic Customers</h4>
                    <p class="text-gray-600 mb-2">Eligibility: Properties valued between R400,000 and R1 million</p>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R2.98</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.63</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Home User Customers</h4>
                    <p class="text-gray-600 mb-2">Eligibility: Properties valued above R1 million</p>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R2.63</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.63</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" class="py-2 px-4 text-right font-semibold">Fixed Monthly Charge: R252.09
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">KwaZulu-Natal - eThekwini Municipality</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Prepaid Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 500 kWh</td>
                                <td class="py-2 px-4 border-b">R2.97</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">501 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.42</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Conventional Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 500 kWh</td>
                                <td class="py-2 px-4 border-b">R2.97</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">501 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.42</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Eastern Cape - Nelson Mandela Bay Municipality</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Prepaid Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.25</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R2.75</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.25</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Conventional Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.20</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R2.70</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.20</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" class="py-2 px-4 text-right font-semibold">Fixed Monthly Charge: R69.00
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Free State - Mangaung Municipality</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Prepaid Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.76</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R3.15</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.53</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Conventional Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.76</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R3.15</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.53</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Limpopo - Polokwane Municipality</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Prepaid Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.99</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R3.25</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.50</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" class="py-2 px-4 text-right font-semibold">Fixed Monthly Charge: R171.17
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Conventional Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.99</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R3.25</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.50</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" class="py-2 px-4 text-right font-semibold">Fixed Monthly Charge: R171.17
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Mpumalanga - Mbombela Municipality</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Prepaid Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R3.42</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R3.65</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.85</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Conventional Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R3.26</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R3.50</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.70</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">North West - Rustenburg Municipality</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Prepaid Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.74</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R2.95</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.15</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" class="py-2 px-4 text-right font-semibold">Fixed Monthly Charge: R396.43
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Conventional Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R2.75</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R2.96</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.16</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2" class="py-2 px-4 text-right font-semibold">Fixed Monthly Charge: R555.75
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Northern Cape - Kimberley Municipality</h3>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Prepaid Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R3.03</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R3.25</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.50</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4 class="text-lg font-semibold mb-2 mt-4">Conventional Customers</h4>
                    <table class="min-w-full bg-white mb-4">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Tier</th>
                                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">0 - 350 kWh</td>
                                <td class="py-2 px-4 border-b">R3.00</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">351 - 600 kWh</td>
                                <td class="py-2 px-4 border-b">R3.22</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">601 - Infinity kWh</td>
                                <td class="py-2 px-4 border-b">R3.48</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Link to download data as JSON -->
            <div class="mt-4">
                <a href="#" id="download-json" class="text-blue-600 underline">Download Tariff Data as JSON</a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="mt-8 py-4 bg-gray-200">
        <div class="container mx-auto text-center">
            <p class="text-gray-700">
                Made with <span class="text-red-500">♥</span> by
                <a href="https://adgstudios.co.za" class="text-blue-600 underline">ADGSTUDIOS</a> © <span
                    id="current-year">2024</span>
            </p>
        </div>
    </footer>

    <!-- Data and Scripts -->
    <script>
        // Set current year in footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Tariff Data
        const tariffData = {
            "Gauteng": {
                "provider": "City Power",
                "prepaid": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.01 },
                        { "min": 351, "max": 500, "rate": 2.40 },
                        { "min": 501, "max": Infinity, "rate": 2.73 }
                    ],
                    "fixed_charge": 0.00
                },
                "conventional": {
                    "tiers": [
                        { "min": 0, "max": 500, "rate": 2.01 },
                        { "min": 501, "max": 1000, "rate": 2.40 },
                        { "min": 1001, "max": 2000, "rate": 2.73 },
                        { "min": 2001, "max": 3000, "rate": 2.76 },
                        { "min": 3001, "max": Infinity, "rate": 2.76 }
                    ],
                    "fixed_charge": 949.19
                }
            },
            "Western Cape": {
                "provider": "City of Cape Town",
                "lifeline": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 1.80 },
                        { "min": 351, "max": 450, "rate": 3.63 }
                    ],
                    "fixed_charge": 0.00,
                    "eligibility": "Properties valued below R400,000"
                },
                "domestic": {
                    "tiers": [
                        { "min": 0, "max": 600, "rate": 2.98 },
                        { "min": 601, "max": Infinity, "rate": 3.63 }
                    ],
                    "fixed_charge": 0.00,
                    "eligibility": "Properties valued between R400,000 and R1 million"
                },
                "home_user": {
                    "tiers": [
                        { "min": 0, "max": 600, "rate": 2.63 },
                        { "min": 601, "max": Infinity, "rate": 3.63 }
                    ],
                    "fixed_charge": 252.09,
                    "eligibility": "Properties valued above R1 million"
                }
            },
            "KwaZulu-Natal": {
                "provider": "eThekwini Municipality",
                "prepaid": {
                    "tiers": [
                        { "min": 0, "max": 500, "rate": 2.97 },
                        { "min": 501, "max": Infinity, "rate": 3.42 }
                    ],
                    "fixed_charge": 0.00
                },
                "conventional": {
                    "tiers": [
                        { "min": 0, "max": 500, "rate": 2.97 },
                        { "min": 501, "max": Infinity, "rate": 3.42 }
                    ],
                    "fixed_charge": 0.00
                }
            },
            "Eastern Cape": {
                "provider": "Nelson Mandela Bay Municipality",
                "prepaid": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.25 },
                        { "min": 351, "max": 600, "rate": 2.75 },
                        { "min": 601, "max": Infinity, "rate": 3.25 }
                    ],
                    "fixed_charge": 0.00
                },
                "conventional": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.20 },
                        { "min": 351, "max": 600, "rate": 2.70 },
                        { "min": 601, "max": Infinity, "rate": 3.20 }
                    ],
                    "fixed_charge": 69.00
                }
            },
            "Free State": {
                "provider": "Mangaung Municipality",
                "prepaid": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.76 },
                        { "min": 351, "max": 600, "rate": 3.15 },
                        { "min": 601, "max": Infinity, "rate": 3.53 }
                    ],
                    "fixed_charge": 0.00
                },
                "conventional": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.76 },
                        { "min": 351, "max": 600, "rate": 3.15 },
                        { "min": 601, "max": Infinity, "rate": 3.53 }
                    ],
                    "fixed_charge": 0.00
                }
            },
            "Limpopo": {
                "provider": "Polokwane Municipality",
                "prepaid": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.99 },
                        { "min": 351, "max": 600, "rate": 3.25 },
                        { "min": 601, "max": Infinity, "rate": 3.50 }
                    ],
                    "fixed_charge": 171.17
                },
                "conventional": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.99 },
                        { "min": 351, "max": 600, "rate": 3.25 },
                        { "min": 601, "max": Infinity, "rate": 3.50 }
                    ],
                    "fixed_charge": 171.17
                }
            },
            "Mpumalanga": {
                "provider": "Mbombela Municipality",
                "prepaid": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 3.42 },
                        { "min": 351, "max": 600, "rate": 3.65 },
                        { "min": 601, "max": Infinity, "rate": 3.85 }
                    ],
                    "fixed_charge": 0.00
                },
                "conventional": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 3.26 },
                        { "min": 351, "max": 600, "rate": 3.50 },
                        { "min": 601, "max": Infinity, "rate": 3.70 }
                    ],
                    "fixed_charge": 0.00
                }
            },
            "North West": {
                "provider": "Rustenburg Municipality",
                "prepaid": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.74 },
                        { "min": 351, "max": 600, "rate": 2.95 },
                        { "min": 601, "max": Infinity, "rate": 3.15 }
                    ],
                    "fixed_charge": 396.43
                },
                "conventional": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 2.75 },
                        { "min": 351, "max": 600, "rate": 2.96 },
                        { "min": 601, "max": Infinity, "rate": 3.16 }
                    ],
                    "fixed_charge": 555.75
                }
            },
            "Northern Cape": {
                "provider": "Kimberley Municipality",
                "prepaid": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 3.03 },
                        { "min": 351, "max": 600, "rate": 3.25 },
                        { "min": 601, "max": Infinity, "rate": 3.50 }
                    ],
                    "fixed_charge": 0.00
                },
                "conventional": {
                    "tiers": [
                        { "min": 0, "max": 350, "rate": 3.00 },
                        { "min": 351, "max": 600, "rate": 3.22 },
                        { "min": 601, "max": Infinity, "rate": 3.48 }
                    ],
                    "fixed_charge": 0.00
                }
            }
        };

        // Function to download tariff data as JSON
        document.getElementById('download-json').addEventListener('click', function (e) {
            e.preventDefault();
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(tariffData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", "tariff_data.json");
            document.body.appendChild(downloadAnchorNode); // required for firefox
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
        });

        // Populate Province Dropdown
        const provinceSelect = document.getElementById('province-select');
        for (let province in tariffData) {
            let option = document.createElement('option');
            option.value = province;
            option.textContent = province;
            provinceSelect.appendChild(option);
        }

        // Show/Hide Starting Consumption Input
        const modeSelect = document.getElementById('mode-select');
        const startingConsumptionDiv = document.getElementById('starting-consumption-div');
        modeSelect.addEventListener('change', function () {
            if (this.value === 'partial') {
                startingConsumptionDiv.classList.remove('hidden');
            } else {
                startingConsumptionDiv.classList.add('hidden');
            }
        });

        // Customer Type Elements
        const customerTypeDiv = document.getElementById('customer-type-div');
        const customerTypeSelect = document.getElementById('customer-type-select');

        // Populate Customer Type Dropdown based on selected province
        provinceSelect.addEventListener('change', function () {
            const province = this.value;
            customerTypeSelect.innerHTML = ''; // Clear previous options

            if (!province) {
                customerTypeDiv.classList.add('hidden');
                return;
            }

            const customerTypes = Object.keys(tariffData[province]).filter(type => type !== 'provider');

            if (customerTypes.length === 0) {
                customerTypeDiv.classList.add('hidden');
                return;
            }

            // Populate customer type options
            customerTypes.forEach(type => {
                const option = document.createElement('option');
                option.value = type;
                option.textContent = type.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase());
                customerTypeSelect.appendChild(option);
            });

            customerTypeDiv.classList.remove('hidden');
        });

        // Handle Form Submission
        const calculatorForm = document.getElementById('calculator-form');
        calculatorForm.addEventListener('submit', function (e) {
            e.preventDefault();
            calculateCost();
        });

        function calculateCost() {
            const province = provinceSelect.value;
            const consumption = parseFloat(document.getElementById('consumption-input').value);
            const mode = modeSelect.value;
            const startingConsumptionInput = document.getElementById('starting-consumption-input');
            let startingConsumption = 0;

            if (mode === 'partial') {
                startingConsumption = parseFloat(startingConsumptionInput.value) || 0;
            }

            const customerTypeSelect = document.getElementById('customer-type-select');
            const customerType = customerTypeSelect.value;

            if (!province || isNaN(consumption) || (mode === 'partial' && isNaN(startingConsumption)) || !customerType) {
                alert('Please fill in all required fields.');
                return;
            }

            const tariffs = tariffData[province][customerType];
            if (!tariffs) {
                alert('Selected customer type is not available for the chosen province.');
                return;
            }

            const tiers = tariffs.tiers;
            const fixedCharge = tariffs.fixed_charge;

            let remainingConsumption = consumption;
            let totalCost = 0;
            let resultRows = [];

            for (let tier of tiers) {
                let tierMin = tier.min;
                let tierMax = tier.max;
                let rate = tier.rate;

                let applicableMin = Math.max(tierMin, startingConsumption);
                let applicableMax = Math.min(tierMax, startingConsumption + consumption);

                let kWhUsed = Math.max(0, Math.min(applicableMax - applicableMin, remainingConsumption));

                if (kWhUsed > 0) {
                    let cost = kWhUsed * rate;
                    totalCost += cost;
                    remainingConsumption -= kWhUsed;

                    resultRows.push({
                        tier: `${applicableMin} - ${tierMax === Infinity ? 'Infinity' : tierMax} kWh`,
                        kWhUsed: kWhUsed.toFixed(2),
                        rate: `R${rate.toFixed(2)}`,
                        cost: `R${cost.toFixed(2)}`
                    });
                }

                if (remainingConsumption <= 0) {
                    break;
                }
            }

            // Display Results
            const resultDiv = document.getElementById('result-div');
            const resultTableBody = document.getElementById('result-table-body');
            const fixedChargesCell = document.getElementById('fixed-charges-cell');
            const totalCostCell = document.getElementById('total-cost-cell');

            // Clear previous results
            resultTableBody.innerHTML = '';

            for (let row of resultRows) {
                let tr = document.createElement('tr');
                tr.innerHTML = `
            <td class="py-2 px-4 border-b">${row.tier}</td>
            <td class="py-2 px-4 border-b">${row.kWhUsed}</td>
            <td class="py-2 px-4 border-b">${row.rate}</td>
            <td class="py-2 px-4 border-b">${row.cost}</td>
        `;
                resultTableBody.appendChild(tr);
            }

            fixedChargesCell.textContent = `R${fixedCharge.toFixed(2)}`;
            totalCostCell.textContent = `R${(totalCost + fixedCharge).toFixed(2)}`;

            resultDiv.classList.remove('hidden');
        }

        // Generate Tariff Tables
        const tariffTablesDiv = document.getElementById('tariff-tables');

        for (let province in tariffData) {
            const provinceData = tariffData[province];
            let provider = provinceData.provider;
            let customerTypes = Object.keys(provinceData);

            // Remove 'provider' key from customerTypes
            customerTypes = customerTypes.filter(type => type !== 'provider');

            let provinceSection = document.createElement('div');
            provinceSection.classList.add('mb-8');

            let provinceTitle = document.createElement('h3');
            provinceTitle.classList.add('text-xl', 'font-semibold', 'mb-4');
            provinceTitle.textContent = `${province} - ${provider}`;
            provinceSection.appendChild(provinceTitle);

            for (let type of customerTypes) {
                let tariff = provinceData[type];

                let typeTitle = document.createElement('h4');
                typeTitle.classList.add('text-lg', 'font-semibold', 'mb-2', 'mt-4');
                typeTitle.textContent = `${type.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())} Customers`;
                provinceSection.appendChild(typeTitle);

                if (tariff.eligibility) {
                    let eligibilityText = document.createElement('p');
                    eligibilityText.classList.add('text-gray-600', 'mb-2');
                    eligibilityText.textContent = `Eligibility: ${tariff.eligibility}`;
                    provinceSection.appendChild(eligibilityText);
                }

                let table = document.createElement('table');
                table.classList.add('min-w-full', 'bg-white', 'mb-4');

                let thead = document.createElement('thead');
                thead.innerHTML = `
            <tr>
                <th class="py-2 px-4 border-b">Tier</th>
                <th class="py-2 px-4 border-b">Rate (R/kWh)</th>
            </tr>
        `;
                table.appendChild(thead);

                let tbody = document.createElement('tbody');

                for (let tier of tariff.tiers) {
                    let tr = document.createElement('tr');
                    let tierRange = `${tier.min} - ${tier.max === Infinity ? 'Infinity' : tier.max} kWh`;
                    tr.innerHTML = `
                <td class="py-2 px-4 border-b">${tierRange}</td>
                <td class="py-2 px-4 border-b">R${tier.rate.toFixed(2)}</td>
            `;
                    tbody.appendChild(tr);
                }

                table.appendChild(tbody);

                if (tariff.fixed_charge > 0) {
                    let tfoot = document.createElement('tfoot');
                    tfoot.innerHTML = `
                <tr>
                    <td colspan="2" class="py-2 px-4 text-right font-semibold">Fixed Monthly Charge: R${tariff.fixed_charge.toFixed(2)}</td>
                </tr>
            `;
                    table.appendChild(tfoot);
                }

                provinceSection.appendChild(table);
            }

            tariffTablesDiv.appendChild(provinceSection);
        }
    </script>
    <!-- Code injected by live-server -->
    <script>
        // <![CDATA[  <-- For SVG support
        if ('WebSocket' in window) {
            (function () {
                function refreshCSS() {
                    var sheets = [].slice.call(document.getElementsByTagName("link"));
                    var head = document.getElementsByTagName("head")[0];
                    for (var i = 0; i < sheets.length; ++i) {
                        var elem = sheets[i];
                        var parent = elem.parentElement || head;
                        parent.removeChild(elem);
                        var rel = elem.rel;
                        if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
                            var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
                            elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
                        }
                        parent.appendChild(elem);
                    }
                }
                var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
                var address = protocol + window.location.host + window.location.pathname + '/ws';
                var socket = new WebSocket(address);
                socket.onmessage = function (msg) {
                    if (msg.data == 'reload') window.location.reload();
                    else if (msg.data == 'refreshcss') refreshCSS();
                };
                if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
                    console.log('Live reload enabled.');
                    sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
                }
            })();
        }
        else {
            console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
        }
        // ]]>
    </script>


</body>

</html>